<!DOCTYPE>
<html>
  <head>
    <meta charset="utf-8">
    <title>Space Carousel</title>
    <meta name="description" content="A Space Carousel ride experience in WebVR populated with flying objects. Coded By Michael McAnally, August 13, 2018 using A-Frame and wonderful open source javascript libraries!"></meta>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="gray-translucent" />

<!-- I've changed these to my own hosted library space to lock down any code changes (during developement), you might want to change back to your own or a valid CDN.  issue: <a-animation> was changed, see: https://github.com/aframevr/aframe/issues/1927 -->

    <script src="https://rocketvirtual.com/webvr/aframe-master/dist/aframe-master.min.js"></script>
    <script src="https://rocketvirtual.com/webvr/aframe-super-hands-component-master/dist..."></script>
    <script src="https://rocketvirtual.com/webvr/kframe-master/components/animation/dist/..."></script>
    <script src="https://rocketvirtual.com/webvr/aframe-environment-component-master/dist..."></script>
    <script src="https://rocketvirtual.com/webvr/aframe-alongpath-component-master/dist/a..." ></script>
    <script src="https://rocketvirtual.com/webvr/aframe-curve-component-master/dist/afram..."></script>
    <script src="https://rocketvirtual.com/webvr/aframe-extras-master/dist/aframe-extras...."></script>
    <script src="https://rocketvirtual.com/webvr/aframe-event-set-component-master/dist/a..."></script>
    <script src="https://rocketvirtual.com/webvr/aframe-mouse-cursor-component-master/dis..."></script>
    <script src="https://rocketvirtual.com/webvr/kframe-master/components/text-geometry/d..."></script>

    <link rel="stylesheet" type="text/css" href="https://rocketvirtual.com/webvr/aframe-super-hands-component-master/exam...">

    <script type="text/javascript">

// Yes, I'm using some global variables here.

var numberOfArrayDimension = 8;   //IMPORTANT: set to max number of first index of array dimension when adding a new array

var playMusicSpeed = 1;

var rotation_speed = 15500;

var planets = ["forest", "yavapai", "contact", "egypt", "checkerboard", "goaland", "goldmine", "threetowers", "poison", "arches", "tron", "dream", "volcano", "starry", "osiris"];

var m = 1;  //counter to visit another planet  
var k = 9;  //counter to reset 9 objects visible again

var indexElement = 0;  //reset to array index

var counttx = 0, countup = true;

var nIntervId;

// originally was part of a point system, now changed to informational notes when objects are shot.  Reason: performance issues, too slow for mobile (i.e. non-tethered VR headsets).  
function startPoints() {
    nIntervId = setInterval(fadePoints, 400);
}
 
function fadePoints()
{
  if (countup)
  {
    counttx = counttx + .10;
    if (counttx >= 1)
      countup = false;
  }
  else
  {
    counttx = counttx - .10;
    if (counttx <= 0)
      countup = true;
  }
  
  document.getElementById('Points').setAttribute('material', 'opacity: ' + counttx.toString());

}
 
function stopPoints() {

      document.getElementById('Points').setAttribute('material', 'opacity: 0');
      clearInterval(nIntervId);
}
  

function changePlanet() {
    m = m + 1;
    if (m > planets.length)  { 
        m = 0;  //reset to array beginning
    }
    // change our environment, may pause play for a moment and redraw
    document.getElementById('onplanet').setAttribute('environment', 'preset: ' + planets[m]);
}

// royalty free sounds
function shoot_raygun(carousel_object) {

    if (indexElement > 5)  { 
        indexElement = 1;  //reset to array index
    }

  switch(carousel_object) {
    case "horse":
          startPoints();
          var audio2 = new Audio('https://rocketvirtual.com/webvr/mp3/horse.mp3');
          audio2.play();
          changeSpeed();
          document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[0][indexElement]);
        break;
    case "duck":
          startPoints();
          var audio2 = new Audio('https://rocketvirtual.com/webvr/mp3/duck.mp3');
          audio2.play();
          changeSpeed();
          document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[1][indexElement]);
        break;
    case "rocket":
          startPoints();
          var audio2 = new Audio('https://rocketvirtual.com/webvr/mp3/rocket.mp3');
          audio2.play();
          changeSpeed();
          document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[2][indexElement]);
        break;
    case "raygun":
          startPoints();
          var audio2 = new Audio('https://rocketvirtual.com/webvr/mp3/raygun.mp3');
          audio2.play();
          changeSpeed();
          document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[3][indexElement]);
        break;
    case "saucer":
          startPoints();
          var audio2 = new Audio('https://rocketvirtual.com/webvr/mp3/saucer.mp3');
          audio2.play();
          changeSpeed();
          document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[4][indexElement]);
        break;
    case "trex":
          startPoints();
          var audio2 = new Audio('https://rocketvirtual.com/webvr/mp3/trex.mp3');
          audio2.play();
          changeSpeed();
          document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[5][indexElement]);
        break;
    case "ceratops":
          startPoints();
          var audio2 = new Audio('https://rocketvirtual.com/webvr/mp3/ceratops.mp3');
          audio2.play();
          changeSpeed();
          document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[6][indexElement]);
        break;
    case "key":
          startPoints();
          var audio2 = new Audio('https://rocketvirtual.com/webvr/mp3/keys.mp3');
          audio2.play();
          changeSpeed();
          document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[7][indexElement]);
        break;
    default:

    }

    indexElement = indexElement + 1;

}

 

function changeSpeed() {

    if (rotation_speed < 5700) {

        rotation_speed = 15500;
        
    }

    rotation_speed = rotation_speed - 1100;

    // speed up the carousel for those who want to go faster, I take no responsibility if you get dizzy or burn up your mobile VR unit
    document.getElementById('sittingDuckA').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckB').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckC').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckD').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckE').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckF').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckG').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckH').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckI').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
       
    // speed up the music every time
    playMusicSpeed = playMusicSpeed + 0.035;   

    playSpeed = document.getElementById('playAudio');
    playSpeed.playbackRate = playMusicSpeed;

}

// Creates a multi-dimensional array

function createArray(length) {
    var arr = new Array(length || 0),
        i = length;

    if (arguments.length > 1) {
        var args = Array.prototype.slice.call(arguments, 1);
        while(i--) arr[length-1 - i] = createArray.apply(this, args);
    }

    return arr;
}

// create a large 2 dimensional global array

funFacts = createArray((numberOfArrayDimension + 1), 45);  // Note: first index in createArray is +1 more than the numberOfArrayDimension

// load array values
// Note: the 0 element is the object name

// horse
funFacts[0][0] = "Equus caballus: common name is\n Horse.";
funFacts[0][1] = "Horses can sleep both lying\n down and standing up.";
funFacts[0][2] = "Horses can run shortly after\n birth.";
funFacts[0][3] = "Horses have been domesticated\n for over 5000 years.";
funFacts[0][4] = "Horses have bigger eyes than\n any other mammal on land.";
funFacts[0][5] = "Horses have evolved from much\n smaller ancestors.";

// duck
funFacts[1][0] = "Anas platyrhynchos: common name\n is Duck.";
funFacts[1][1] = "A yellow rubber duck has achieved\n iconic status in western pop culture.";
funFacts[1][2] = "The rubber duck is symbolically\n linked with bathing.";
funFacts[1][3] = " ";
funFacts[1][4] = " ";
funFacts[1][5] = " ";

// rocket
funFacts[2][0] = "Rocket";
funFacts[2][1] = "The first rocket was invented by\n the Chinese around year 1200.";
funFacts[2][2] = "Rockets were originally used for\n fireworks and for rescuing people at sea.";
funFacts[2][3] = "Robert Goddard is considered the father\n of modern rocketry. He built the first\n liquid-fueled rocket in 1926.";
funFacts[2][4] = "A typical rocket produces more than a\n million pounds of thrust.";
funFacts[2][5] = "Launch rockets are actually several\n rockets linked together.";

// raygun
funFacts[3][0] = "Raygun";
funFacts[3][1] = "A raygun is a science fiction particle-beam\n weapon that fires what is usually destructive energy.";
funFacts[3][2] = "They have various alternate names:\n ray gun, death ray, beam gun, blaster,\n laser gun, laser pistol, phaser, zap gun, etc.";
funFacts[3][3] = "A very early example of a raygun is\n the Heat-Ray featured in H. G. Wells'\n novel The War of the Worlds (1898).";
funFacts[3][4] = "Science fiction during the 1920s\n described death rays.";
funFacts[3][5] = " ";

// saucer
funFacts[4][0] = "Flying Saucer";
funFacts[4][1] = "The term UFO for Unidentified Flying\n Object was coined by US Air Force officer\n Edward Ruppelt in 1952.";
funFacts[4][2] = "Between 1947 and 1969, 12,618 UFO\n sightings were reported to Project\n Blue Book.";
funFacts[4][3] = "In Roswell, New Mexico on July 8th of 1947,\n an information office publicized the recovery\n of a crashed flying disc.";
funFacts[4][4] = "The book Flying Saucers from Outer Space,\n written by author Donald E. Keyhoe in\n 1953, used the term UFO.";
funFacts[4][5] = " ";

// trex
funFacts[5][0] = "Tyrannosaurus";
funFacts[5][1] = "Tyrannosaurus commonly refered to\n as T-Rex";
funFacts[5][2] = "A person who studies dinosaurs\n is called a paleontologist.";
funFacts[5][3] = "Dinosaurs lived on earth until\n 65 million years ago.";
funFacts[5][4] = " ";
funFacts[5][5] = " ";
        
// ceratops
funFacts[6][0] = "Triceratops";
funFacts[6][1] = "Modern birds descended from a group\n of two-legged dinosaurs known as theropods.";
funFacts[6][2] = "Scientist believe dinosaurs became\n extinct after a large metior impacted\n the earth.";
funFacts[6][3] = " ";
funFacts[6][4] = " ";
funFacts[6][5] = " ";

// key
funFacts[7][0] = "key";
funFacts[7][1] = " ";
funFacts[7][2] = " ";
funFacts[7][3] = " ";
funFacts[7][4] = " ";
funFacts[7][5] = " ";

 

// Component to do on click.
AFRAME.registerComponent('cursor-listener', {
  init: function () {

    this.el.addEventListener('click', function (evt) {
    //count down the opbjects
    k = k - 1;

    if (k < 1)  { 
        k = 9;  //reset to beginning

        // return music to normal speed
        playMusicSpeed = 1;
        playSpeed = document.getElementById('playAudio');
        playSpeed.playbackRate = playMusicSpeed;

        //return all 9 objects to view
        document.getElementById('sittingDuckA').setAttribute('visible', true);
        document.getElementById('sittingDuckB').setAttribute('visible', true);
        document.getElementById('sittingDuckC').setAttribute('visible', true);
        document.getElementById('sittingDuckD').setAttribute('visible', true);
        document.getElementById('sittingDuckE').setAttribute('visible', true);
        document.getElementById('sittingDuckF').setAttribute('visible', true);
        document.getElementById('sittingDuckG').setAttribute('visible', true);
        document.getElementById('sittingDuckH').setAttribute('visible', true);
        document.getElementById('sittingDuckI').setAttribute('visible', true);

        //visit another planet
        m = m + 1;
        if (m > planets.length)  { 
            m = 0;  //reset to array beginning
        }
        // change our environment, may pause play for a moment and redraw
        document.getElementById('onplanet').setAttribute('environment', 'preset: ' + planets[m]);

 

    } else {

        // remove clicked object from view
        this.setAttribute('visible', false);

    }

 

    });
  }
});

//   Solves Google mute of audio problem (and it is...) https://stackoverflow.com/questions/47921013/play-sound-on-click-in-a-fr...

AFRAME.registerComponent('audiohandler', {
  init:function() {
     let playing = false;
     let audio = document.querySelector("#playAudio");
     this.el.addEventListener('click', () => {

          if(!playing) {
              audio.play();
           } else {
              audio.pause();
              audio.currentTime = 0;
           }
           playing = !playing;
     });
  }
})

      function playSound() {

         //alert("Sound playing functional!!!");
        }

  </script>

  </head>
<body>
    <button id="playButton" type="button">Play Music</button>
    <!-- I like the sound of this fun, joyful Carnival Banna tune for game: this "Royalty Purchase" for 10,000 downloads -->
    <audio id="playAudio" autoplay loop>
        <source src="https://rocketvirtual.com/webvr/mp3/Carnival_Banana.mp3" type="audio/mpeg">
    </audio>
    
<!-- to embed uncomment this and style a-scene above    <a-scene embedded>  -->
    <a-scene>

     <a-assets>
        <a-mixin id="pointer" raycaster="showLine: true; objects: .clickable, a-link"
                  super-hands="colliderEvent: raycaster-intersection;
                               colliderEventProperty: els;
                               colliderEndEvent:raycaster-intersection-cleared;
                               colliderEndEventProperty: clearedEls;" >

        <a-mixin id="controller-right" mixin="pointer"
                 vive-controls="hand: right" oculus-touch-controls="hand: right"
                 windows-motion-controls="hand: right"
                 gearvr-controls daydream-controls oculus-go-controls >

        <img crossorigin="anonymous" id="music-image_on" src="https://rocketvirtual.com/webvr/images/music.png">
        <img crossorigin="anonymous" id="planet_cntl-image" src="https://rocketvirtual.com/webvr/images/planets.png">
        <img crossorigin="anonymous" id="speed_cntl-image" src="https://rocketvirtual.com/webvr/images/speed.png">
        <img crossorigin="anonymous" id="game_logo-image" src="https://rocketvirtual.com/webvr/images/game_logo2.png">

        <a-asset-item id="horse" src="https://rocketvirtual.com/webvr/models/Horse_Free.dae"></a-asset-item>
        <a-asset-item id="rocket" src="https://rocketvirtual.com/webvr/gltf/rocket4.glb"></a-asset-item>
        <a-asset-item id="raygun" src="https://rocketvirtual.com/webvr/gltf/raygun4/raygun.glb"></a-asset-item>
        <a-asset-item id="flyingsaucer" src="https://rocketvirtual.com/webvr/gltf/FlyingSaucer/fsaucer.glb"></a-asset-item>
        <a-asset-item id="trex" src="https://rocketvirtual.com/webvr/collada/Trex_base_mesh.dae"></a-asset-item>
        <a-asset-item id="triceratops" src="https://rocketvirtual.com/webvr/collada/Triceratops_base_mesh.dae"></a-asset-item>
        <a-asset-item id="duck" src="https://rocketvirtual.com/webvr/gltf/Duck.gltf"></a-asset-item>
        <a-asset-item id="key" src="https://rocketvirtual.com/webvr/models/Key.dae"></a-asset-item>

        <img id="pink" src="https://rocketvirtual.com/webvr/images/fontcolor.png" />

        <a-asset-item id="dawningFont" src="https://rocketvirtual.com/webvr/kframe-master/components/text-geometry/e..."></a-asset-item>

        <a-asset-item id="exoFont" src="https://rocketvirtual.com/webvr/kframe-master/components/text-geometry/e..."></a-asset-item>

        <a-asset-item id="exoItalicFont" src="https://rocketvirtual.com/webvr/kframe-master/components/text-geometry/e..."></a-asset-item>

    </a-assets>

    <!-- Zoom and move the camera in for dramatic effects in browser window -->

    <a-entity id="camera_yoyo" animation__second="property: position;
                                         dir: alternate;
                                         dur: 12000;
                                         easing: easeInSine;
                                         loop: true;
                                         from: 0 1.6 0;
                                         to: 0 36 0" begin="20000" >
            <a-camera look-controls wasd-controls mouse-cursor id="camera_zoom" position="0 1.6 0" user-height="1.6"
                                animation="property: position;
                                         dur: 15000;
                                         from: 0 0 75;
                                         to: 0 1.6 0;
                                         easing: easeInOutSine;
                                         loop: false;
                                         direction: normal" ><a-entity id="rhand" mixin="controller-right" >
                                                 <a-cursor fuse="true" position="0 0 -3"
                                                      geometry="primitive: ring; radiusInner: 0.2; radiusOuter: 0.3;"
                                                      material="color: cyan; shader: flat"
                                                      cursor="maxDistance: 150; fuse: true">
                                                  <a-animation begin="click" easing="ease-in" attribute="scale"
                                                        fill="forwards" from="0.2 0.2 0.2" to="1 1 1" dur="150"></a-animation>
                                                  <a-animation begin="fusing" easing="ease-in" attribute="scale"
                                                        fill="backwards" from="1 1 1" to="0.2 0.2 0.2" dur="1000"></a-animation>

                                                        <a-entity id="Points" text-geometry="value: text"; font: #dawningFont; bevelEnabled: true; bevelSize: 0.05; bevelThickness: 0.05; curveSegments: 12; size: .15; height: 0;" material="color:lavenderblush; metalness:1; roughness: 0; sphericalEnvMap: #pink; transparent: true; opacity: 0" position=".35 0 0" scale=".25 .25 .25" ></a-entity>

                                            </a-cursor>
 
                                            </a-entity>
                                         </a-camera>
                                     </a-entity>

                            

        <a-box id="playButton" class="clickable" position = "-2 26 -12" material="src: #music-image_on" scale="1.25 1.25 .25" onclick="playSound();" audiohandler ></a-box>

        <a-box id="planetButton" class="clickable" position = "0 26 -12" material="src: #planet_cntl-image" scale="1.25 1.25 .25" onclick="changePlanet();" 
                  animation="property: position;
                                dir: alternate;
                                    dur: 20000;
                            easing: easeInSine;
                                    loop: true;
                                  to: 0 5 -17" begin="8000">
        </a-box>

        <a-box id="speedButton" class="clickable" position = "2 26 -12" material="src: #speed_cntl-image" scale="1.25 1.25 .25" onclick="changeSpeed();" ></a-box>

        <a-box id="gameLogo" class="clickable" position = "0 29 -12" material="src: #game_logo-image" scale="5.25 4 .25" onclick="gameLogo();" ></a-box>

    <!-- Setup tracs A-I for the carousel.  Not a true circle, but it works...  Varying the y-axis for height in air of object following trac. -->

    <a-curve id="tracA" >
        <a-curve-point position="0 1 8" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="5 1 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="7 1 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="5 1 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 1 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 1 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-8 1 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 1 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 1 8" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracB" curve="">
        <a-curve-point position="0 7 2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 7 4" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-8 7 10" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 7 15" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 7 17" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 7 14" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="7 7 10" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 7 5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 7 2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracC" curve="">
        <a-curve-point position="12 1 11" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="14 1 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="10 1 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 1 -1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 1 2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-2 1 7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="1 1 12" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 1 14" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="12 1 11" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracD" curve="">
        <a-curve-point position="9 20 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="3 20 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="1 20 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="5 20 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="9 20 8" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="14 20 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="16 20 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="14 20 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="9 20 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracE" curve="">
        <a-curve-point position="0 1 -12" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-2 1 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="0 1 -3" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 1 1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="9 1 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="13 1 -4" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="13 1 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="8 1 -14" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 1 -12" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracF" curve="">
        <a-curve-point position="7 14 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="5 14 -15" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="0 14 -17" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 14 -15" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-8 14 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-4 14 -3" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="3 14 -3" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="7 14 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracG" curve="">
        <a-curve-point position="1 24 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-3 24 -13" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-11 24 -13" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-14 24 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-13 24 -2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-7 24 1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-3 24 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 24 -3" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="1 24 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracH" curve="">
        <a-curve-point position="-2 10 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-4 10 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-10 10 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-15 10 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-17 10 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-15 10 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-10 10 8" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-4 10 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-2 10 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracI" curve="">
        <a-curve-point position="-12 1 1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-14 1 9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-9 1 14" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-1 1 12" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="1 1 7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-1 1 2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-6 1 -1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-12 1 1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

 

    <!-- objects following the trac.  Letter A-I corresponds to trac curve above.  Collada and glTF objects loaded here, move to assets later... Note: All objects are royalty free and/or created by me. -->

    <a-collada-model id="sittingDuckA" class="clickable" src="#horse" alongpath="curve:#tracA;loop:true;dur:12000;rotate:true" scale="" position="-4.27 1 -6" shadow="receive:false" rotation="-24 -90 90" animation__rotate="property:rotation;dur:3000;easing:linear;loop:true;from:0 0 0;to:0 360 0" onclick="stopPoints();shoot_raygun('horse');" cursor-listener></a-collada-model>

    <a-entity id="sittingDuckB" class="clickable" gltf-model="#duck" alongpath="curve:#tracB;loop:true;dur:14000;rotate:true" position="4.29 1 15.43" shadow="receive:false" rotation="0 261.96 0" scale="1 1 1" animation__rotate="property:rotation;dur:3000;easing:linear;loop:true;from:0 0 0;to:0 360 0" onclick="stopPoints();shoot_raygun('duck');" cursor-listener></a-entity>

    <a-collada-model id="sittingDuckC" class="clickable"  src="#horse" alongpath="curve:#tracC;loop:true;dur:12000;rotate:true" position="-1.77 1 5.17" shadow="receive:false" rotation="0 261.96 0" scale="" animation__rotate="property:rotation;dur:3000;easing:linear;loop:true;from:0 0 0;to:0 360 0" onclick="stopPoints();shoot_raygun('horse');" cursor-listener></a-collada-model>

    <a-entity id="sittingDuckD" class="clickable" gltf-model="#flyingsaucer" alongpath="curve:#tracD;loop:true;dur:12000;rotate:true" position="12.44 1 7.12" shadow="receive:false" rotation="0 261.96 0" scale="4.5 4.5 4.5" animation__rotate="property:rotation;dur:3000;easing:linear;loop:true;from:0 0 0;to:0 360 0" onclick="stopPoints();shoot_raygun('saucer');" cursor-listener></a-entity>

    <a-collada-model id="sittingDuckE" class="clickable" src="#horse" scale="" alongpath="curve:#tracE;loop:true;dur:12000;rotate:true" position="11.90 1 -2.37" shadow="receive:false" rotation="0 138.07 0" onclick="stopPoints();shoot_raygun('horse');" cursor-listener></a-collada-model>

    <a-collada-model id="sittingDuckF" class="clickable" src="#trex" alongpath="curve:#tracF;loop:true;dur:9000;rotate:true" position="-7.92 1 -8.56" shadow="receive:false" rotation="0 13.05 0" scale="1 1 1" onclick="stopPoints();shoot_raygun('trex');" cursor-listener></a-collada-model>

    <a-collada-model id="sittingDuckG" class="clickable" src="#triceratops" alongpath="curve:#tracG;loop:true;dur:12000;rotate:true" position="-9.22 1 0.45" shadow="receive:false" rotation="0 70.51 0" scale="0.35 0.35 0.35" onclick="stopPoints();shoot_raygun('ceratops');" cursor-listener></a-collada-model>

    <a-entity id="sittingDuckH" class="clickable" gltf-model="#rocket" alongpath="curve:#tracH;loop:true;dur:14000;rotate:true" position="-16.13 1 4.16" shadow="receive:false" rotation="0 23.64 0" scale="3.5 3.5 3.5" onclick="stopPoints();shoot_raygun('rocket');" cursor-listener></a-entity>

    <a-entity id="sittingDuckI" class="clickable" gltf-model="#raygun" scale="" alongpath="curve:#tracI;loop:true;dur:12000;rotate:true" position="0.98 1 6.65" shadow="receive:false" rotation="0 -175.74 0" onclick="stopPoints();shoot_raygun('raygun');" cursor-listener></a-entity>

    <!-- Tune the world environment to the desired settings  -->

    <a-entity id="onplanet" environment="preset: forest; shadow: true; dressingAmount: 125"></a-entity>
 
    <a-entity class="environment" position="-1.2 2.94 3.03" light="intensity:0.6;castShadow:true;shadowCameraLeft:-20;shadowCameraBottom:-20;shadowCameraRight:20;shadowCameraTop:20" visible=""></a-entity>

    <a-entity class="environmentDressing environment" visible="false"></a-entity>

 

</a-scene>
<script>
//Google Code for un-audio mute
// Existing code unchanged.
window.onload = function() {
  var context = new AudioContext();
  // Setup all nodes

}

// One-liner to resume playback when user interacted with the page.
document.querySelector('button').addEventListener('click', function() {
  context.resume().then(() => {
    console.log('Playback resumed successfully');
  });
});

</script>

</body>
</html>
